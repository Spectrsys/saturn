<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Static Resources Plugin</title>
  
  <script type="text/javascript" src="../scripts/highlight.js"></script>
  <link rel="stylesheet" href="../styles/style.css">
</head>
<body>
  <div id="sidebar" class="interface"><ul><li class="header"><a href="index.html">Plugins</a><ul class="sub"><li><a href="../plugins/conditional.html">Conditional Plugin</a></li><li><a href="../plugins/inline-styles.html">Inline Styles Plugin</a></li><li><a href="../plugins/module-map.html">Module Map Plugin</a></li><li><a href="../plugins/package-config.html">Package Config Plugin</a></li><li><a href="../plugins/router.html">Router Plugin</a></li><li><a href="../plugins/scope.html">Scope Plugin</a></li><li><a href="../plugins/static-resources.html">Static Resources Plugin</a></li><li><a href="../plugins/stylus.html">Stylus Plugin</a></li><li><a href="../plugins/template.html">Template Plugin</a></li><li><a href="../plugins/update-externals.html">Update Externals Plugin</a></li></ul></li><li class="header"><a href="../">Home</a></li></ul></div>
  <div class="container"><div class="page">
    <h1>Static Resources Plugin</h1>

<h2 id="introduction">Introduction</h2>

<p>Static resource management plug-in. Each module can have a "static" attribute which is an array of resources to be copied from the application path to the outputDir (or platformDir). Each static entry can be a simple string or a hash containing.</p>

<ul><li>src: the source location (specific file or directory for recursive copy).</li><li>dest: the destination location. Initial '/' indicates use of outputDir path, otherwise platformDir path.</li><li>platform: a single platform to execute the copy (optional and mutually exclusive with platforms)</li><li>platforms: an array of platforms to execute the copy (optional and mutually exclusive with platform)</li></ul>

<h2 id="example">Example</h2>

<pre><code>{
  "platforms": ["iphone", "android"],
  "modules": {
    "foo": {
      "static": [
        // copy {app}/index.html to {outputDir}/iphone/index.html and {outputDir}/android/index.html
        "index.html",

        // copy {app}/index.html to {outputDir/index.html}
        "/index.html",

        // copy recursively {app}/static to {outputDir}/static
        "/static",

        // copy {app}/index-iphone.html to {app}/iphone/index.html only for the iphone platform
        {"src": "index-iphone.html", "dest": "index.html", "platform": "iphone"}

        // copy recursively {app}/static/iphone to {outputDir}/iphone and {app}/static/android to {outputDir}/android
        // will error if any of the platform directories are missing
        {"src": "static/$platform", "dest": "/$platform"}
      ]
   }
}</code></pre>

<h2 id="notes">Notes</h2>

<ul><li>outputDir is obtained from a command line argument when invoking lumbar.</li><li>platformdir is the {outputDir}/platform</li></ul>

<h2 id="questions">Questions</h2>

<ul><li><p>When we say the following, the iphone and android are referring to their respective platform names. In the above example, the platforms are iphone and android.</p><p>&lt;pre&gt;&lt;code class="javascript"&gt;// copy {app}/index.html to {outputDir}/iphone/index.html and {outputDir}/android/index.html&lt;/code&gt;&lt;/pre&gt;</p></li><li><p>What if a '/' was put in front of the src? For example</p><p>&lt;pre&gt;&lt;code class="javascript"&gt;{"src": "/index-iphone.html", "dest": "index.html", "platform": "iphone"}&lt;/code&gt;&lt;/pre&gt;</p></li></ul>

<p>Would that mean it would get copied to {outputDir}/index.html? Instead of {outputDir}/iphone/index.html on accident?</p>

<p>A: No, it will go {outputDir}/iphone/index.html. Beacuse, if you have an entry that was just a string, then both src and dest are that value. The dest attribute is used to determine platformDir vs ouputDir.</p>

<p>If dest has a / in front of it, it will still output to the platformDir and not the outputDir if a platform is present.</p>

<ul><li>What does <code>{src: "static/$platform", dest: "/${platform}"}</code> do exactly? Will it copy all files from static/iphone to {outputDir}/iphone or {outputDir}/iphone/iphone?</li></ul>

<p>A: It would copy {app}/static/iphone/<em> to {outputDir}/iphone/</em> and {app}/static/android to {outputDir}/android</p>

<p>(this is because the initial dest / indicates outputDir but then the platform variable is used)</p>
  </div></div>
  <a href="http://github.com/walmartlabs/lumbar">
    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub">
  </a>
</body>
</html>
